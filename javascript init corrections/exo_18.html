<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Javascript : initiation</title>
</head>
<body>
	
	<script>

	 /**
	 * Exercice 18
	 *
	 * HTML5 Game Jam
	 *
	 * Nous avons reçu une serie de mails afin de s'inscrire à la prochaine HTML5 Game Jam
	 * Dans ces mails, les adresses à ajouter à la liste des participants sont toujours précédés d'un +
	 * Dans ces mails, les adresses à retirer de la liste des participants sont toujourd précédés d'un -
	 *
	 * Affichez la liste final des participants
	 */


	var mails = ['Veuillez trouvez ci-joint les premiers participants: +alex.d@gmail.com et +bernard.s@hotmail.fr',
             'Ah! J\'oubliais: +lucie.p@free.fr +marc.q@gmail.com',
             'Quelques modifs de dernière minute: +albert.t@hotmail.fr -alex.d@gmail.com',
             'Finalement fabrice peut venir: +fabrice.s@hotmail.com',
             'Du nouveau aujourd\'hui ;) +gerard.v@acm.com +lise.x@hotmail.com -albert.t@hotmail.fr',
             'Moi aussi je veux participer: +geraldine@free.fr',
             'Au fait, désolé pour tout ces changements :(',
             'Finalement on vient! +edgard.d@gmail.it +benoit.l@hotmail.be',
             'Elle ne pourra pas venir: -lise.x@hotmail.com',
             'Les derniers inscrits: +valerie.w@fergi.com +aurelie.b@hotmail.com'];

             var mail 		= '',
             	liste_mot 	= [],
             	participant = [],
             	email = '',
             	signe = '',
             	indice = 0;

             for (var i = 0; i < mails.length; i++) {

             	mail = mails[i];

             	if(mail.indexOf('@') < 0)	continue;

             	liste_mot = mail.split(' ');

             	for (var j = 0; j < liste_mot.length; j++) {
             		if(liste_mot[j].indexOf('@') < 0)	continue;

         			email = liste_mot[j].slice(1);
         			signe = liste_mot[j].charAt(0);

         			if(signe == '+'){
         				participant.push(email);
         			}else{

         				indice = participant.indexOf(email);

         				if(indice >= 0){
         					// console.log(email);
         					participant.splice(indice, 1);
         				}
         			}
             	};
             };

         document.write("Liste des participants : <ol><li>"+participant.join("</li><li>")+"</li></ol>");    
	 
	</script>
</body>
</html>